window.glaze={};
(function(){function h(a,c,b){function d(a){f=f||a;typeof b==="function"?b(f):console.error(f)}var e=new XMLHttpRequest,f;e.addEventListener("load",function(){c(e.responseText)},!1);e.addEventListener("error",d,!1);e.addEventListener("abort",d,!1);try{e.open("GET",window.encodeURI(a),!0),e.send(null)}catch(i){f=i}}function g(a){if(a instanceof window.HTMLElement)return a;typeof a==="string"&&(a=a[0]==="#"?a.slice(1):a);return document.getElementById(a)}function j(a,c){var b=g(a),b=b?b.innerHTML:null;
typeof c==="function"&&c(b);return b}if(typeof window.requestAnimationFrame!=="function")window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)};window.gl=null;Object.defineProperty(glaze,"element",function(){var a;return{enumerable:!0,configurable:!0,get:function(){return a},set:function(c){if(c===null)return window.gl=a=null;a=c=g(c);window.gl=a.getContext("experimental-webgl")}}}());
(function(){function a(){var a=0,c=b.length;if(c>0&&!gl)throw Error("glaze.ready: No WebGL context, set glaze.element with a Canvas element.");for(;a<c;a++)b[a](window.gl);b.length=0}function c(){a();window.removeEventListener("DOMContentLoaded",c,!1)}var b=[];glaze.ready=function(c){b.push(c);window.readyState==="complete"&&a()};window.readyState!=="complete"&&(window.addEventListener?window.addEventListener("DOMContentLoaded",c,!1):console.error("window.addEventListener not supported."))})();glaze.createShader=
function(a,c){var b;if(a==="vertex")a=gl.VERTEX_SHADER;if(a==="fragment")a=gl.FRAGMENT_SHADER;b=gl.createShader(a);gl.shaderSource(b,c);gl.compileShader(b);return b};glaze.loadShader=function(a,c,b){var d=g(a);if(d)return a=glaze.createShader(c,j(d)),typeof b==="function"&&b(a),a;else h(a,function(a){b(glaze.createShader(c,a))})};glaze.createProgram=function(a,c){var b;b=gl.createProgram();gl.attachShader(b,a);gl.attachShader(b,c);gl.linkProgram(b);return b};glaze.loadProgram=function(a,c){var b,
d,e,f;b=g(a.vertex);d=g(a.fragment);b&&(e=glaze.loadShader(b,gl.VERTEX_SHADER));d&&(f=glaze.loadShader(d,gl.FRAGMENT_SHADER));if(e&&f)return b=glaze.createProgram(e,f),typeof c==="function"&&c(b),b;e||glaze.loadShader(a.vertex,gl.VERTEX_SHADER,function(a){f?c(glaze.createProgram(a,f)):e=a});f||glaze.loadShader(a.fragment,gl.FRAGMENT_SHADER,function(a){e?c(glaze.createProgram(e,a)):f=a})};glaze.createAttribute=function(a,c){var b;gl.useProgram(a);b=gl.getAttribLocation(a,c);gl.enableVertexAttribArray(b);
return b};glaze.createUniform=function(a,c){gl.useProgram(a);return gl.getUniformLocation(a,c)};glaze.createBuffer=function(a,c,b){var d,c=c===void 0?gl.ARRAY_BUFFER:c,b=b===void 0?gl.STATIC_DRAW:b;d=gl.createBuffer();gl.bindBuffer(c,d);c===gl.ARRAY_BUFFER?(Array.isArray(a)&&(a=new window.Float32Array(a)),gl.bufferData(gl.ARRAY_BUFFER,a,b)):(Array.isArray(a)&&(a=new window.Uint16Array(a)),gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,a,b));return d};glaze.createTexture=function(a,c){var c=c===void 0?gl.RGBA:
c,b=gl.createTexture();gl.bindTexture(gl.TEXTURE_2D,b);gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL,!0);gl.texImage2D(gl.TEXTURE_2D,0,c,c,gl.UNSIGNED_BYTE,a);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.NEAREST);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.NEAREST);gl.generateMipmap(gl.TEXTURE_2D);gl.bindTexture(gl.TEXTURE_2D,null);return b};glaze.loadTexture=function(a,c){function b(){throw new URIError("glaze.loadTexture: Unable to load "+d.src);}var d;typeof a!=="string"?d=a:a[0]===
"#"?(a=a[0]==="#"?a.slice(1):a,d=document.getElementById(a)):(d=new window.Image,d.src=window.encodeURI(a));if(!d instanceof window.Image)throw new ReferenceError("glaze.loadTexture: Image must be an element or url.");d.complete?c(glaze.createTexture(d)):(d.addEventListener("load",function(){c(glaze.createTexture(d))}),d.addEventListener("error",b),d.addEventListener("abort",b))}})();
