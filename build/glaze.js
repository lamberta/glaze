window.glaze={};
(function(){function h(a,b,c){function d(a){e=e||a;typeof c==="function"?c(e):console.error(e)}var f=new XMLHttpRequest,e;f.addEventListener("load",function(){b(f.responseText)},!1);f.addEventListener("error",d,!1);f.addEventListener("abort",d,!1);try{f.open("GET",window.encodeURI(a),!0),f.send(null)}catch(i){e=i}}function g(a){if(a instanceof window.HTMLElement)return a;typeof a==="string"&&(a=a[0]==="#"?a.slice(1):a);return document.getElementById(a)}function j(a,b){var c=g(a),c=c?c.innerHTML:null;
typeof b==="function"&&b(c);return c}if(typeof window.requestAnimationFrame!=="function")window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)};window.gl=null;Object.defineProperty(glaze,"element",function(){var a;return{enumerable:!0,configurable:!0,get:function(){return a},set:function(b){if(b===null)return window.gl=a=null;a=b=g(b);window.gl=a.getContext("experimental-webgl")}}}());
(function(){function a(){var a=0,b=c.length;if(b>0&&!gl)throw Error("glaze.ready: No WebGL context, set glaze.element with a Canvas element.");for(;a<b;a++)c[a](window.gl);c.length=0}function b(){a();window.removeEventListener("DOMContentLoaded",b,!1)}var c=[];glaze.ready=function(b){c.push(b);window.readyState==="complete"&&a()};window.readyState!=="complete"&&(window.addEventListener?window.addEventListener("DOMContentLoaded",b,!1):console.error("window.addEventListener not supported."))})();glaze.animate=
function(a){var b=Array.prototype.slice.call(arguments,1),c=b[0]instanceof HTMLElement?b.shift():glaze.element,d=this;b.length===0&&(b=null);(function e(){a.apply(d,b);window.requestAnimationFrame(e,c)})()};glaze.createShader=function(a,b){var c;if(a==="vertex")a=gl.VERTEX_SHADER;if(a==="fragment")a=gl.FRAGMENT_SHADER;c=gl.createShader(a);gl.shaderSource(c,b);gl.compileShader(c);return c};glaze.loadShader=function(a,b,c){var d=g(a);if(d)return a=glaze.createShader(b,j(d)),typeof c==="function"&&c(a),
a;else h(a,function(a){c(glaze.createShader(b,a))})};glaze.createProgram=function(a,b){var c;c=gl.createProgram();gl.attachShader(c,a);gl.attachShader(c,b);gl.linkProgram(c);return c};glaze.loadProgram=function(a,b){var c,d,f,e;c=g(a.vertex);d=g(a.fragment);c&&(f=glaze.loadShader(c,gl.VERTEX_SHADER));d&&(e=glaze.loadShader(d,gl.FRAGMENT_SHADER));if(f&&e)return c=glaze.createProgram(f,e),typeof b==="function"&&b(c),c;f||glaze.loadShader(a.vertex,gl.VERTEX_SHADER,function(a){e?b(glaze.createProgram(a,
e)):f=a});e||glaze.loadShader(a.fragment,gl.FRAGMENT_SHADER,function(a){f?b(glaze.createProgram(f,a)):e=a})};glaze.createAttribute=function(a,b){var c;gl.useProgram(a);c=gl.getAttribLocation(a,b);gl.enableVertexAttribArray(c);return c};glaze.createUniform=function(a,b){gl.useProgram(a);return gl.getUniformLocation(a,b)};glaze.createBuffer=function(a,b,c){var d,b=b===void 0?gl.ARRAY_BUFFER:b,c=c===void 0?gl.STATIC_DRAW:c;d=gl.createBuffer();gl.bindBuffer(b,d);b===gl.ARRAY_BUFFER?(Array.isArray(a)&&
(a=new window.Float32Array(a)),gl.bufferData(gl.ARRAY_BUFFER,a,c)):(Array.isArray(a)&&(a=new window.Uint16Array(a)),gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,a,c));return d};glaze.createTexture=function(a,b){var b=b===void 0?gl.RGBA:b,c=gl.createTexture();gl.bindTexture(gl.TEXTURE_2D,c);gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL,!0);gl.texImage2D(gl.TEXTURE_2D,0,b,b,gl.UNSIGNED_BYTE,a);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.NEAREST);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.NEAREST);
gl.generateMipmap(gl.TEXTURE_2D);gl.bindTexture(gl.TEXTURE_2D,null);return c};glaze.loadTexture=function(a,b){function c(){throw new URIError("glaze.loadTexture: Unable to load "+d.src);}var d;typeof a!=="string"?d=a:a[0]==="#"?(a=a[0]==="#"?a.slice(1):a,d=document.getElementById(a)):(d=new window.Image,d.src=window.encodeURI(a));if(!d instanceof window.Image)throw new ReferenceError("glaze.loadTexture: Image must be an element or url.");d.complete?b(glaze.createTexture(d)):(d.addEventListener("load",
function(){b(glaze.createTexture(d))}),d.addEventListener("error",c),d.addEventListener("abort",c))}})();
